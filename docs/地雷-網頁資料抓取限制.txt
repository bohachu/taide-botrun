# 地雷經驗：網頁資料抓取限制

## 問題描述
在抓取台灣知識體系資源時，遇到以下問題：
1. Wikipedia 等網站因 403 錯誤無法抓取（反爬蟲機制）
2. 電子書平台僅能抓取平台資訊，無法獲取完整內容（版權保護）
3. 部分網站的 HTML 結構複雜，WebFetch 提取的資訊有限

## 發生時機
- 使用 WebFetch 工具抓取台灣文學維基百科頁面時
- 抓取國家圖書館電子書內容時
- 需要大量結構化資料但網站僅提供網頁瀏覽時

## 地雷原因
1. **反爬蟲機制**：Wikipedia 等網站有嚴格的訪問控制，會阻擋自動化工具
2. **版權保護**：電子書等內容受版權保護，平台不允許批量下載
3. **工具限制**：WebFetch 主要處理網頁文字內容，對於複雜的互動式網站支援有限

## 解決方案

### 1. Wikipedia 資料抓取
```bash
# 使用 Wikipedia API 替代直接抓取網頁
# 範例：抓取台灣文學條目
curl "https://zh.wikipedia.org/w/api.php?action=query&prop=extracts&titles=台灣文學&format=json&formatversion=2"
```

### 2. 電子書內容處理
- 僅記錄平台資訊、館藏編號、存取方式
- 註明「僅供網路瀏覽，禁止轉載」等使用限制
- 如需完整內容，建議：
  - 使用官方 API（如有提供）
  - 申請資料存取權限
  - 遵守版權規範

### 3. 改善 WebFetch 提取效果
- 設定更具體的 prompt，明確要求提取的欄位
- 範例 prompt：
  ```
  請提取此網站的主要資訊，包括：
  1. 網站標題
  2. 網站類型（辭典/資料庫等）
  3. 收錄內容範圍
  4. 主要功能說明
  5. 使用方式
  請以結構化方式呈現（使用標題、列表、表格）。
  ```

### 4. 備用方案
對於無法抓取的網站：
- 記錄 URL、標題、類型、簡要說明
- 標註「抓取失敗」及錯誤訊息
- 在 JSONL 中保留記錄，方便後續手動處理

## 成功案例
本次成功抓取 11 個台灣知識體系資源：
1. 教育部成語典
2. 教育部重編國語辭典修訂本
3. 教育部國語辭典簡編本
4. 教育部異體字字典
5. 台灣文學網文學史年表
6. 中國古詩文精讀
7. 臺灣華文電子書庫古文觀止
8. Chinese Text Project 古文觀止
9. 文言文字典
10. 翰霖補習班形音義整理
11. 文化部台灣知名作家及作品

失敗 1 個：
- Wikipedia 台灣文學（403 錯誤）

## 參考資源
- Wikipedia API 文件：https://www.mediawiki.org/wiki/API:Main_page
- 台灣知識體系資料抓取結果：step-002-資料抓取/raw/知識體系/fetch-result.jsonl

## 記錄時間
2025-12-13
