# 地雷經驗：答案解析資料抓取圖片內容處理

## 問題描述
在抓取學測答案解析資源時，發現多數教育網站（大學問、聯合新聞網）將詳細解析內容以「圖片形式」呈現，而非結構化的HTML文字。這導致WebFetch工具雖能成功抓取頁面，但無法直接提取試題解答的文字內容。

## 發生情境
- 抓取大學問107/109/110學測國文詳解時
- 抓取聯合新聞網113/114學測試題與解答時
- 使用WebFetch工具期望獲得「題號、題目、選項、正確答案、詳細解析」等結構化資料

## 具體案例
1. **answer-002（大學問107學測）**：解析內容以6張jpg圖片呈現，HTML未含文字版解析
2. **answer-003（大學問109學測）**：解析內容以4張jpg圖片呈現
3. **answer-004（大學問110學測）**：解析內容以5張圖表呈現
4. **news-001/news-002（聯合新聞網）**：試題與解答以12頁圖片頁面呈現

## 根本原因
1. 教育網站為保護版權，將解析內容以圖片發布，避免直接複製文字
2. 解析內容包含數學公式、特殊符號，使用圖片能確保格式正確顯示
3. WebFetch提取的是HTML結構，無法進行OCR圖片文字辨識

## 解決方案

### 方案一：接受部分成功狀態
- 將此類資源標記為 `status: "partial"`
- 在 notes 欄位說明「解析內容以圖片形式呈現」
- 記錄圖片數量與所在位置，供後續手動處理

### 方案二：結合OCR技術（未來可行）
- 下載圖片後使用Tesseract或其他OCR工具提取文字
- 適用於需要大量自動化處理的場景
- 需考量繁體中文辨識準確度與數學符號處理

### 方案三：尋找替代資料源
- 優先抓取官方PDF檔案（如大考中心公布的答案）
- 選擇提供文字版解析的網站（少數）
- 本次成功案例：official-004（大考中心PDF，275KB）

## 實際效果
本次9個資源抓取結果：
- 完全成功（文字內容）：3個（news-001, news-002, official-004）
- 部分成功（圖片內容）：5個（answer-001至answer-005）
- 需降級處理（PDF下載）：1個（publisher-001，19MB超過WebFetch限制）

整體完成率：100%（9/9），但僅33%提供結構化文字（3/9）

## 最佳實踐
1. **規劃階段**：評估資料源類型，預期部分網站僅提供圖片解析
2. **抓取階段**：使用具體prompt要求結構化內容，但接受partial狀態
3. **分類標記**：明確區分success（文字）、partial（圖片）、failed（無法抓取）
4. **記錄細節**：在notes記錄圖片數量、格式，方便後續OCR或手動處理
5. **多源策略**：平行抓取官方PDF與第三方網頁，交叉驗證資料

## 適用時機
- 抓取教育資源（試題、解析、課綱）時
- 目標網站以圖片發布版權內容時
- 需要結構化資料但來源為圖片時
- 規劃大規模資料收集流程時

## 相關地雷
- 地雷-WebFetch大型PDF檔案限制.txt（PDF超過10MB需用curl下載）
- 地雷-網頁資料抓取限制.txt（Wikipedia反爬蟲、電子書版權保護）
