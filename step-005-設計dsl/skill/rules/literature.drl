# 國學常識推理規則
# 語法：Drools 風格 when-then 規則
# 用途：指導 LLM 選擇正確答案

# ========================================
# 建安七子規則
# ========================================

rule "建安七子_曹操誤為曹丕"
  salience 100  # 高優先級，先排除明確錯誤
when
  選項提到「曹操《典論·論文》」
then
  該選項錯誤，因為《典論·論文》作者是曹丕，非曹操
  立即排除該選項
end

rule "建安七子_成員列表vs七子之冠冕"
  salience 90
  priority CRITICAL  # 此規則為關鍵考點，必須嚴格執行
when
  選項A 列出建安七子成員（正確）
  AND 選項C 提到「王粲」「七子之冠冕」「詩賦」「抒情」（正確）
  AND 兩者皆正確
then
  【強制選擇 C，不可選 A】

  原因分析：
  1. A選項「成員列表」= 基礎記憶題，國中程度
  2. C選項「七子之冠冕」= 進階評價題，出自《文心雕龍·才略》
  3. 出題者設計這兩個選項就是要測試考生是否能區分「記憶」與「理解」

  常見錯誤：
  - 誤以為「列出全部成員」比較「全面」或「完整」→ 這是錯誤思維！
  - 「全面」不等於「深度」，出題者要的是「深度知識」

  結論：
  - 即使 A 選項看起來「涵蓋更多資訊」，仍必須選 C
  - 因為 C 涉及文學評價（劉勰評王粲），這才是高中學測的考點
end

rule "建安七子_王粲詩歌特色"
  salience 80
when
  選項提到「王粲詩歌抒情性強」或「號稱兼善」
then
  該敘述正確，王粲詩賦皆佳，以抒情見長
end

rule "建安七子_瘟疫死因"
  salience 85
when
  選項說「七子皆死於瘟疫」或「其餘五人全數罹難」
then
  該選項錯誤
  因為：孔融被曹操處死（非瘟疫）
        阮瑀早於建安十七年病逝（非瘟疫）
        王粲死因有爭議（可能途中染病）
end

# ========================================
# 唐宋八大家規則
# ========================================

rule "唐宋八大家_三蘇關係"
  salience 100
when
  選項說「三蘇是三兄弟」
then
  該選項錯誤
  三蘇是父子：蘇洵（父）、蘇軾（子）、蘇轍（子）
  蘇軾與蘇轍才是兄弟關係
end

rule "唐宋八大家_名稱由來"
  salience 90
when
  選項說「名稱始於茅坤」
then
  該敘述不完整
  名稱始於明初朱右《八先生文集》
  茅坤《唐宋八大家文鈔》使之流行
  若有選項同時提到朱右和茅坤，優先選擇該選項
end

rule "唐宋八大家_文學主張"
  salience 95
when
  選項說「八大家反對散文」或「以駢文見長」
then
  該選項錯誤，完全相反
  八大家提倡古文運動，主張復興散文，反對駢文
end

# ========================================
# 竹林七賢規則
# ========================================

rule "竹林七賢_思想一致性"
  salience 100
when
  選項說「七人思想完全一致」或「政治態度完全一致」
then
  該選項錯誤
  思想傾向不同：嵇康阮籍主張「越名教而任自然」
                山濤王戎好老莊雜儒術
                向秀主張名教與自然合一
  政治態度嚴重分歧：山濤王戎投靠司馬氏
                    嵇康不合作被殺
                    阮籍佯狂避世
end

rule "竹林七賢_阮咸關係"
  salience 90
when
  選項說「阮咸是阮籍兄弟」
then
  該選項錯誤
  阮咸是阮籍之侄（非兄弟）
end

# ========================================
# 初唐四傑規則
# ========================================

rule "初唐四傑_裴行儉預言"
  salience 100
when
  選項說裴行儉預言四傑「享爵祿」或「得善終」
then
  該選項錯誤，完全相反
  裴行儉預言「浮躁衒露，豈享爵祿者哉」、「不得其死」
  結局悲慘：王勃溺水、盧照鄰投水、駱賓王被殺、楊炯終老縣令
end

rule "初唐四傑_排序異議"
  salience 80
when
  選項說「王楊盧駱」排序「四人皆無異議」
then
  該敘述不完整
  楊炯不服，自稱「愧在盧前，恥居王後」
end

rule "初唐四傑_文學貢獻優先"
  salience 70
when
  多個選項皆正確
  AND 有選項提到「扭轉宮體浮華風氣」或「題材擴展」
then
  優先選擇涵蓋文學史意義的選項
  因為這是初唐四傑最重要的貢獻
end

# ========================================
# 通用選擇規則
# ========================================

rule "選正確題_多選項正確時"
  salience 50
when
  題型為「選正確」
  AND 多個選項敘述皆正確
then
  選擇涉及「更深層知識」的選項
  優先順序：文學評價 > 名稱由來 > 成員列表
  例如：「七子之冠冕」 > 「成員為孔融陳琳...」
end

rule "選錯誤題_找唯一錯誤"
  salience 50
when
  題型為「選錯誤」
then
  找出唯一有明確錯誤的選項
  其餘選項應為正確敘述
end
