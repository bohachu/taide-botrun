# 成語辨識推理規則
# 語法：Drools 風格 when-then 規則
# 用途：指導 LLM 判斷成語用字正確性

# ========================================
# 成語判斷基本規則
# ========================================

rule "成語_雙成語皆須正確"
  salience 100
when
  選項格式為「成語1／成語2」
then
  必須兩個成語用字都正確才算正確
  任一成語錯誤則該選項錯誤
end

rule "成語_套用知識庫錯字表"
  salience 90
when
  知識庫標記「X(錯)→Y(對)」
  AND 成語使用字 X
then
  該成語錯誤
  正確用字為 Y
end

# ========================================
# 常見成語錯字規則
# ========================================

rule "成語_罄竹難書"
  salience 80
when
  成語為「磬竹難書」
then
  錯誤，正確為「罄竹難書」
  「罄」=用盡，「磬」=樂器
end

rule "成語_貌合神離"
  salience 80
when
  成語為「貌和神離」
then
  錯誤，正確為「貌合神離」
  「合」=配合，「和」=和諧（語意不同）
end

rule "成語_鋌而走險"
  salience 80
when
  成語為「挺而走險」
then
  錯誤，正確為「鋌而走險」
  「鋌」=快跑，「挺」=挺立（語意不同）
end

rule "成語_直截了當"
  salience 80
when
  成語為「直接了當」或「直截了當」
then
  「直截了當」為標準寫法
  「直接了當」在部分辭典列為異體，兩者皆可接受
  但考試建議選「直截了當」
end

# ========================================
# 輸出規則
# ========================================

rule "輸出_逐項分析"
  salience 10
when
  完成所有選項分析
then
  輸出 JSONL 格式
  包含每個選項的兩個成語判斷結果
  標記唯一「兩成語皆正確」的選項為答案
end
