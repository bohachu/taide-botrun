# 字形辨識推理規則
# 語法：Drools 風格 when-then 規則
# 用途：指導 LLM 判斷字形正確性

# ========================================
# 字形判斷基本規則
# ========================================

rule "字形_雙字皆須正確"
  salience 100
when
  選項格式為「字1詞組1／字2詞組2」
then
  必須兩個字都正確才算「字形完全正確」
  任一字錯誤則該選項錯誤
end

rule "字形_套用知識庫"
  salience 90
when
  知識庫標記「A(錯)→B(對)」
  AND 選項使用字 A
then
  該字錯誤
  應使用字 B
end

# ========================================
# 常見形近字規則
# ========================================

rule "形近字_勵vs厲"
  salience 80
when
  詞組為「厲行節約」
then
  正確用字為「厲」（嚴格之意）
  「勵」為錯誤（勵是鼓勵之意）
end

rule "形近字_蜂vs鋒"
  salience 80
when
  詞組為「蜂擁而至」
then
  正確用字為「蜂」
  「蜂湧」為教育部認定的錯誤寫法
end

rule "形近字_賑vs振"
  salience 80
when
  詞組為「賑災濟貧」
then
  正確用字為「賑」（救濟之意）
  「振」用於「振聾發聵」（震動之意）
end

rule "形近字_弊vs蔽"
  salience 80
when
  詞組為「弊絕風清」
then
  正確用字為「弊」（弊病之意）
  「蔽」用於遮蔽之意
end

# ========================================
# 輸出規則
# ========================================

rule "輸出_逐項分析"
  salience 10
when
  完成所有選項分析
then
  輸出 JSONL 格式
  包含每個選項的兩個字判斷結果
  標記唯一「兩字皆正確」的選項為答案
end
