[[
> 請問你的 .mjs 是可以自然語言輸入提問之後他自動會拆解關鍵字去查找嗎？拆解關鍵字是採用 
google/gemma-3-12b-it ??? 我希望你簡單跟我講你怎樣呼叫 google/gemma-3-12b-it 
以及呼叫幾次，解釋給我聽流程 

⏺ solver.mjs 流程說明

  關鍵字提取：純規則比對，不用 LLM

  // 不是 LLM 拆解，是寫死的關鍵字列表比對
  const literatureKeywords = [
    '唐宋八大家', '三蘇', '建安七子', '竹林七賢'...
  ];

  const charPairs = [
    ['厲', '勵'], ['蜂', '鋒'], ['擁', '湧']...
  ];

  // 直接 includes() 比對
  const matched = literatureKeywords.filter(kw => fullText.includes(kw));

  LLM 呼叫：只呼叫 1 次

  題目輸入
      ↓
  [規則比對] 提取關鍵字 ← 不用 LLM
      ↓
  [rg 指令] 平行搜尋知識庫 ← 不用 LLM
      ↓
  [字串組裝] 知識 + 題目 + 模板 → prompt
      ↓
  [LLM] google/gemma-3-12b-it ← 只呼叫這一次！
      ↓
  答案輸出

  總結

  | 步驟       | 方式                    | 用 LLM? |
  |------------|-------------------------|---------|
  | 關鍵字提取 | 寫死的列表 + includes() | ❌      |
  | 知識檢索   | rg 指令平行搜尋         | ❌      |
  | 解題推理   | google/gemma-3-12b-it   | ✅ 1次  |

  缺點：關鍵字列表是寫死的，無法處理沒預先定義的新題型。

  如果要改成 LLM 拆解關鍵字，會變成呼叫 2 次 LLM（1次拆解 + 1次解題），成本和延遲都會增加。

> 寫死的列表 + includes() 給我看你怎麼寫的，我擔心沒有泛化 

⏺ Read(step-005-設計dsl/skill/scripts/solver.mjs)
  ⎿  Read 80 lines

⏺ 你的擔心是對的。這段程式碼完全沒有泛化能力：

  問題分析

  // 寫死的 22 個國學關鍵字
  const literatureKeywords = [
    '唐宋八大家', '三蘇', '韓愈', '柳宗元'...  // 只有這些
  ];

  // 寫死的 10 個成語
  const idiomKeywords = [
    '罄竹難書', '貌合神離'...  // 只有這些
  ];

  // 寫死的 9 組形近字
  const charPairs = [
    ['厲', '勵'], ['蜂', '鋒']...  // 只有這些
  ];

  泛化問題

  | 情境                   | 能處理？ |
  |------------------------|----------|
  | 題目提到「唐宋八大家」 | ✅ 有寫  |
  | 題目提到「元曲四大家」 | ❌ 沒寫  |
  | 題目提到「桐城派」     | ❌ 沒寫  |
  | 成語「杯弓蛇影」       | ❌ 沒寫  |
  | 形近字「籍/藉」        | ❌ 沒寫  |

  唯一的 fallback（第 126-135 行）

  // 如果都沒匹配，就提取所有中文 2-4 字詞
  const allChineseWords = fullText.match(/[\u4e00-\u9fff]{2,4}/g) || [];

  這個 fallback 很弱：
  - 會抓到「下列」「何者」「正確」這種無意義詞
  - 無法區分哪些詞才是該查的知識點

  結論

  這是 MVP 硬編碼，只能處理這 5 題。要泛化需要：

  1. 用 LLM 提取關鍵字（多呼叫 1 次）
  2. 或 用 Embedding 語意搜尋知識庫
  3. 或 把知識庫做成全文索引直接搜

  要我改成 LLM 提取關鍵字的版本嗎？
]]

你這種做法沒有泛化
所以我希望你可以有一個專門提取關鍵字的 .mjs 而且他也採用 google/gemma-3-12b-it
必須有 bdd tdd solid dry 設計
這個提取的提示工程必須非常有策略才有辦法涵蓋
請設計三種替代方案打分 1 to 10 未來要能泛化涵蓋高中國文學測要滿分的策略
然後我希望刪除掉不能泛化的版本的程式碼（對照表的那種）
你請大模型輸出一定要是 jsonl 格式會比較好處理（後續處理）
所以給的示範必須精確
要泛化不能洩漏答案否則會 over fitting
